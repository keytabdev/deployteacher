(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7786],{4654:function(){},3164:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var r=a(9268),s=a(443),n=a(1462),i=a(5846),l=a.n(i),c=a(8136),o=a(4821),d=a(2992),u=a(4055),x=a(4105),m=a(2338),f=a(5147),h=a(8582),p=a(9460),g=a(6006),j=a(8919),w=a(4824),b=a(7497),y=a.n(b);function v(e){let{token:t,customQuery:a}=e,{deleteAnswer:i,answers:b,isLoading:v,query:N,createAnswerModalContext:k,setQuery:Z,setPage:C,page:A}=function(e,t){let a=(0,g.useContext)(f.f),[r,s]=(0,g.useState)(""),[n,i]=(0,g.useState)(1),l=(0,h.Z)(r,500),c=y().stringify({sort:["createdAt:desc"],pagination:{page:n,pageSize:10},filters:{$or:[{id:{$eq:l}},{answer_text:{$containsi:l}},{question:{question_text:{$containsi:l}}}],$and:[t&&{question:{id:{$eq:t}}}]},fields:["answer_text","is_correct"],populate:{question:{fields:["question_text"]}}},{encodeValuesOnly:!0}),{data:o,isLoading:d}=(0,w.useQuery)(["answers",l,n],()=>p.Z.getAnswers(e,c),{onError:()=>j.ZP.error("something went wrong please try again after refreshing")});return{deleteAnswer:async function(t){return p.Z.deleteByID(e,t)},answers:o,isLoading:d,query:r,createAnswerModalContext:a,setQuery:s,setPage:i,page:n}}(t,a);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"w-full p-4",children:[(0,r.jsxs)("div",{className:"ml-auto flex w-full items-center justify-between gap-4",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Answers"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 rounded-md border bg-gray-100 px-3 py-3 dark:border-gray-600 dark:bg-primaryBg",children:[(0,r.jsx)(c.dVI,{className:"text-xl"}),(0,r.jsx)("input",{type:"text",className:"bg-transparent outline-none",placeholder:"search",onChange:e=>Z(e.target.value),value:N})]}),(0,r.jsx)(s.zx,{onClick:null==k?void 0:k.onOpen,className:"flex w-fit items-center gap-2 text-white",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.B8K,{className:"text-xl"}),(0,r.jsx)("span",{children:"Add answer"})]})})]})]}),(0,r.jsxs)("div",{className:"mt-8 rounded-md shadow-lg",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full min-w-[750px]  rounded-md border bg-white p-4 shadow-lg dark:border-none dark:bg-primaryBg",children:[(0,r.jsx)("thead",{className:"border dark:border-gray-600",children:(0,r.jsxs)("tr",{className:"text-left",children:[(0,r.jsx)("td",{className:"p-4 font-bold",children:"ID"}),(0,r.jsx)("td",{className:"p-4 font-bold",children:"Question name"}),(0,r.jsx)("td",{className:"p-4 font-bold",children:"Answer"}),(0,r.jsx)("td",{className:"p-4 font-bold",children:"Is correct"}),(0,r.jsx)("td",{className:"p-4 text-right font-bold"})]})}),(0,r.jsx)("tbody",{className:"border dark:border-gray-600",children:v?(0,r.jsx)("td",{colSpan:5,className:"p-4 text-center",children:(0,r.jsx)(d.Z,{})}):(null==b?void 0:b.data)&&b.data.length>0?null==b?void 0:b.data.map(e=>{var t;let{id:a,attributes:s}=e,{answer_text:c,is_correct:d,question:u}=s;return(0,r.jsxs)("tr",{className:"dark:hover:bg-tra  w-full hover:bg-gray-100 dark:hover:bg-transparent",children:[(0,r.jsx)("td",{className:"p-4 text-left",children:a}),(0,r.jsx)("td",{className:"p-4 text-left",children:null===(t=u.data)||void 0===t?void 0:t.attributes.question_text}),(0,r.jsx)("td",{className:"p-4 text-left",children:c}),(0,r.jsx)("td",{className:"p-4 text-left",children:d&&(0,r.jsx)("span",{className:"bg-green-100 text-green-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-green-900 dark:text-green-300",children:"Correct"})}),(0,r.jsxs)("td",{className:"flex items-center justify-end gap-2 p-4",children:[(0,r.jsx)(l(),{href:"/dashboard/answers/".concat(a),children:(0,r.jsx)(o.yMw,{className:"cursor-pointer text-2xl text-gray-500 dark:text-white"})}),(0,r.jsx)(n.Z,{fn:i,title:"".concat(c),label:"answer",id:a.toString(),keys:["answers"]})]})]},a)}):(0,r.jsx)("td",{colSpan:4,className:"p-4 text-center",children:"No answers found"})})]})}),(0,r.jsx)(u.Z,{page:A,pageCount:(null==b?void 0:b.meta.pagination.pageCount)||1,setPage:C})]})]}),(0,r.jsx)(x.Z,{open:null==k?void 0:k.open,children:(0,r.jsx)(m.default,{token:t})})]})}},2338:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var r=a(9268),s=a(443),n=a(5147),i=a(9460),l=a(3071),c=a(4772),o=a(8852),d=a(6006),u=a(8919),x=a(4824),m=a(4088);function f(e){let{token:t}=e,{handleChange:a,handleSubmit:f,values:h,errors:p,questionOptions:g,question:j,setQuestion:w,loading:b}=function(e){let t=(0,x.useQueryClient)(),a=(0,d.useContext)(n.f),[r,s]=(0,d.useState)([]),[m,f]=(0,d.useState)({value:"",label:""}),{handleChange:h,handleSubmit:p,values:g,errors:j}=(0,o.TA)({initialValues:{answerText:"",isCorrect:!1},validationSchema:c.Q,async onSubmit(e){await v(e)}}),{data:w}=(0,x.useQuery)(["select-questions"],()=>l.Z.getQuestions(e,"?fields[0]=question_text"),{staleTime:1/0,onError:()=>u.ZP.error("something went wrong, please try again")}),{mutateAsync:b,isLoading:y}=(0,x.useMutation)(t=>i.Z.createAnswer(e,t),{onSuccess:async()=>{await t.invalidateQueries(["answers"]),null==a||a.onClose(),u.ZP.success("Answer created successfully")}});async function v(e){if(!m.value){u.ZP.error("please select question");return}try{let t={data:{question:m.value,answer_text:e.answerText,is_correct:g.isCorrect}};await b(t)}catch(e){u.ZP.error(e.response.data.error.message||"something went wrong, please try again!")}}return(0,d.useEffect)(()=>{w&&s(null==w?void 0:w.data.map(e=>({value:e.id.toString(),label:e.attributes.question_text})))},[w]),{handleChange:h,handleSubmit:p,values:g,errors:j,questionOptions:r,question:m,setQuestion:f,loading:y}}(t),y=(0,d.useContext)(n.f);return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:"Create a new answer"}),(0,r.jsx)("p",{children:"Add the information about the answer"})]}),(0,r.jsxs)("form",{onSubmit:f,className:"rounded-md p-3 shadow-md",action:"",children:[(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsx)(s.II,{name:"answerText",value:h.answerText,onChange:a,error:p.answerText,label:"Answer text",variant:"filled"})}),(0,r.jsx)("div",{className:"mb-12 flex items-center gap-4",children:(0,r.jsx)(s.ZD,{name:"isCorrect",title:"Is correct answers",onChange:a,value:h.isCorrect})}),(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:"Choose a question"}),(0,r.jsx)(m.ZP,{value:j,onChange:e=>w({value:null==e?void 0:e.value.toString(),label:null==e?void 0:e.label}),options:g})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,r.jsx)(s.zx,{loading:b,type:"submit",className:"w-fit text-white",children:"Create answer"}),(0,r.jsx)(s.zx,{onClick:null==y?void 0:y.onClose,className:"w-fit bg-transparent text-primary",children:"Cancel"})]})]})]})}},1462:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var r=a(9268),s=a(6006),n=a(4769),i=a(4824),l=a(8919),c=a(1033),o=a(5372),d=a(4105);function u(e){let{id:t,title:a,label:u,fn:x,keys:m}=e,f=(0,i.useQueryClient)(),[h,p]=(0,s.useState)(!1),{mutateAsync:g,isLoading:j}=(0,i.useMutation)([t],()=>x(t),{onSuccess:async()=>await f.invalidateQueries(m)});async function w(){try{await g(),p(!1),l.Am.success("".concat(u," delete successfully"))}catch(e){p(!1),l.Am.error(e.response.data.error.message||"something went wrong!")}}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.VPh,{onClick:()=>p(!0),className:"cursor-pointer text-2xl text-gray-500 dark:text-white"}),(0,r.jsx)(d.Z,{open:h,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,r.jsx)(o.OvZ,{className:"mb-4 text-4xl text-red-500"}),(0,r.jsx)("h1",{className:"text-bold mb-4 text-center text-xl",children:"Warning!"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,r.jsxs)("p",{children:["Are you sure you want to delete a ",u]}),(0,r.jsx)("span",{className:"text-center text-xl font-bold",children:a})]}),(0,r.jsxs)("div",{className:"mt-8 flex items-center gap-4",children:[(0,r.jsx)(n.default,{onClick:w,loading:j,className:"w-full text-white",children:"Yes sure"}),(0,r.jsx)(n.default,{onClick:()=>p(!1),className:"w-full bg-transparent text-primary",children:"No cancel"})]})]})})]})}},443:function(e,t,a){"use strict";a.d(t,{zx:function(){return r.default},II:function(){return s.default},gx:function(){return l},ZD:function(){return c}});var r=a(4769);a(9510);var s=a(445);a(9743),a(3402);var n=a(9268);a(6006);let i={outline:"bg-white",filled:"bg-gray-100 dark:bg-primaryBg border-2 border dark:border-gray-500 dark:focus-within:border-primary focus-within:border-primary"};var l=function(e){let{label:t,variant:a,error:r,...s}=e;return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:t}),(0,n.jsx)("textarea",{...s,className:"h-[200px] resize-none  rounded-md px-2 py-3 outline-none ".concat(i[a])}),r&&(0,n.jsx)("small",{className:"mt-1 text-sm text-red-500",children:r})]})};function c(e){let{title:t,value:a,onChange:r,name:s}=e;return(0,n.jsxs)("label",{className:"relative w-fit inline-flex items-center cursor-pointer",children:[(0,n.jsx)("input",{name:s,onChange:r,type:"checkbox",checked:a,className:"sr-only peer"}),(0,n.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}),(0,n.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300",children:t})]})}},2992:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(9268);function s(){return(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"h-[55px] w-[55px] animate-spin rounded-full border-2 border-l-primary border-r-primary border-t-primary dark:border-b-gray-500"})})}},4105:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(9268);function s(e){let{children:t,open:a}=e;return(0,r.jsx)(r.Fragment,{children:a?(0,r.jsx)("div",{className:"fixed left-0 top-0 z-50 flex min-h-screen w-full items-center justify-center bg-[rgba(0,0,0,0.6)]",children:(0,r.jsx)("div",{className:"w-full max-w-[550px] rounded-md bg-white p-4 dark:bg-primaryBg",children:t})}):(0,r.jsx)(r.Fragment,{})})}},4055:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(9268),s=a(4821),n=a(4769);function i(e){let{page:t,setPage:a,pageCount:i}=e;return(0,r.jsxs)("div",{className:"flex items-center justify-end bg-white py-2 dark:bg-primaryBg",children:[(0,r.jsx)(n.default,{disabled:1===t,onClick:()=>a(t-1),className:"bg-transparent disabled:text-gray-400",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(s.RL9,{}),(0,r.jsx)("span",{children:"Prev"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("small",{children:"of"}),(0,r.jsx)("p",{children:i})]}),(0,r.jsx)(n.default,{disabled:t===i,onClick:()=>a(t+1),className:"bg-transparent disabled:text-gray-400",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(s.Bqb,{})]})})]})}},4737:function(e,t,a){"use strict";var r=a(4214),s=a(8611);let n=r.default.create({baseURL:"".concat(s.env.NEXT_PUBLIC_BASE_URL,"/api"),headers:{"Content-Type":"application/json"}});t.Z=n},5147:function(e,t,a){"use strict";a.d(t,{f:function(){return n},n:function(){return i}});var r=a(9268),s=a(6006);let n=(0,s.createContext)(null),i=e=>{let{children:t}=e,[a,i]=(0,s.useState)(!1);return(0,r.jsx)(n.Provider,{value:{open:a,onClose:()=>i(!1),onOpen:()=>i(!0)},children:t})}},8582:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(6006);function s(e,t){let[a,s]=(0,r.useState)(e);return(0,r.useEffect)(()=>{let a=setTimeout(()=>s(e),t);return()=>{clearTimeout(a)}},[e,t]),a}},9460:function(e,t,a){"use strict";var r=a(4737);t.Z=class{static async getAnswers(e,t){let a=await r.Z.get("/answers?".concat(t||""),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async getAnswerById(e,t){let a=await r.Z.get("/answers/".concat(t,"?populate=*"),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async deleteByID(e,t){let a=await r.Z.delete("/answers/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async createAnswer(e,t){let a=await r.Z.post("/answers",t,{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async updateAnswer(e,t,a){let s=await r.Z.put("/answers/".concat(t),a,{headers:{Authorization:"Bearer ".concat(e)}});return s.data}}},3071:function(e,t,a){"use strict";var r=a(4737);t.Z=class{static async getQuestions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=await r.Z.get("/questions?".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async getQuestionByID(e,t){let a=await r.Z.get("/questions/".concat(t,"?populate=*"),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async createQuestion(e,t){let a=await r.Z.post("/questions",t,{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async updateQuestion(e,t,a){let s=await r.Z.put("/questions/".concat(t),a,{headers:{Authorization:"Bearer ".concat(e)}});return s.data}static async deleteQuestion(e,t){let a=await r.Z.delete("/questions/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}}},4772:function(e,t,a){"use strict";a.d(t,{Q:function(){return s}});var r=a(353);let s=r.Ry({answerText:r.Z_().trim("answer text should be valid").required("answer text is required"),isCorrect:r.O7().default(!1)})}}]);