(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5532],{8676:function(e,t,a){Promise.resolve().then(a.bind(a,6724))},6724:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var r=a(9268),s=a(6006),n=a(9460),i=a(3071),c=a(4772),o=a(8852),l=a(6008),u=a(8919),d=a(4824),h=a(443),f=a(4088);function x(e){let{token:t,answer:a}=e,{handleChange:x,handleSubmit:m,values:w,errors:p,questionOptions:g,seletedQuestion:b,setSelectedQuestion:y,loading:v}=function(e,t){var a,r;let h=(0,l.useRouter)(),f=(0,d.useQueryClient)(),{question:x,answer_text:m,is_correct:w}=t.data.attributes,[p,g]=(0,s.useState)([]),[b,y]=(0,s.useState)({value:"".concat(null===(a=x.data)||void 0===a?void 0:a.id),label:null===(r=x.data)||void 0===r?void 0:r.attributes.question_text}),{handleChange:v,handleSubmit:j,values:N,errors:Z}=(0,o.TA)({initialValues:{answerText:m,isCorrect:w},validationSchema:c.Q,async onSubmit(e){await _(e)}}),{data:A}=(0,d.useQuery)(["select-questions"],()=>i.Z.getQuestions(e,"?fields[0]=question_text"),{staleTime:1/0,onError:()=>u.ZP.error("something went wrong, please try again")}),{mutateAsync:k,isLoading:B}=(0,d.useMutation)([t.data.id.toString()],a=>n.Z.updateAnswer(e,t.data.id.toString(),a),{onSuccess:async()=>await f.invalidateQueries(["answers"])});async function _(e){try{let t={data:{question:b.value,answer_text:e.answerText,is_correct:N.isCorrect}};await k(t),u.ZP.success("Answer updated successfully"),h.push("/dashboard/answers")}catch(e){u.ZP.error(e.response.data.error.message||"something went wrong, please try again!")}}return(0,s.useEffect)(()=>{A&&g(null==A?void 0:A.data.map(e=>({value:e.id.toString(),label:e.attributes.question_text})))},[A]),{handleChange:v,handleSubmit:j,values:N,errors:Z,questionOptions:p,seletedQuestion:b,setSelectedQuestion:y,loading:B}}(t,a);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:"Update answer"}),(0,r.jsx)("p",{children:a.data.attributes.answer_text})]}),(0,r.jsxs)("form",{onSubmit:m,className:"rounded-md bg-white p-3 shadow-md",action:"",children:[(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsx)(h.II,{name:"answerText",value:w.answerText,onChange:x,error:p.answerText,label:"Answer text",variant:"filled"})}),(0,r.jsx)("div",{className:"mb-12 flex items-center gap-4",children:(0,r.jsx)(h.ZD,{name:"isCorrect",title:"Is correct answers",onChange:x,value:w.isCorrect})}),(0,r.jsx)("div",{className:"mb-12 grid grid-cols-1 gap-12  md:grid-cols-2 md:gap-8",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:"Choose a question"}),(0,r.jsx)(f.ZP,{value:b,onChange:e=>y({value:null==e?void 0:e.value.toString(),label:null==e?void 0:e.label}),options:g})]})}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(h.zx,{loading:v,type:"submit",className:"w-fit text-white",children:"Update answer"})})]})]})}},443:function(e,t,a){"use strict";a.d(t,{zx:function(){return r.default},II:function(){return s.default},gx:function(){return c},ZD:function(){return o}});var r=a(4769);a(9510);var s=a(445);a(9743),a(3402);var n=a(9268);a(6006);let i={outline:"bg-white",filled:"bg-gray-100 dark:bg-primaryBg border-2 border dark:border-gray-500 dark:focus-within:border-primary focus-within:border-primary"};var c=function(e){let{label:t,variant:a,error:r,...s}=e;return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:t}),(0,n.jsx)("textarea",{...s,className:"h-[200px] resize-none  rounded-md px-2 py-3 outline-none ".concat(i[a])}),r&&(0,n.jsx)("small",{className:"mt-1 text-sm text-red-500",children:r})]})};function o(e){let{title:t,value:a,onChange:r,name:s}=e;return(0,n.jsxs)("label",{className:"relative w-fit inline-flex items-center cursor-pointer",children:[(0,n.jsx)("input",{name:s,onChange:r,type:"checkbox",checked:a,className:"sr-only peer"}),(0,n.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}),(0,n.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300",children:t})]})}},4737:function(e,t,a){"use strict";var r=a(4214),s=a(8611);let n=r.default.create({baseURL:"".concat(s.env.NEXT_PUBLIC_BASE_URL,"/api"),headers:{"Content-Type":"application/json"}});t.Z=n},9460:function(e,t,a){"use strict";var r=a(4737);t.Z=class{static async getAnswers(e,t){let a=await r.Z.get("/answers?".concat(t||""),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async getAnswerById(e,t){let a=await r.Z.get("/answers/".concat(t,"?populate=*"),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async deleteByID(e,t){let a=await r.Z.delete("/answers/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async createAnswer(e,t){let a=await r.Z.post("/answers",t,{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async updateAnswer(e,t,a){let s=await r.Z.put("/answers/".concat(t),a,{headers:{Authorization:"Bearer ".concat(e)}});return s.data}}},3071:function(e,t,a){"use strict";var r=a(4737);t.Z=class{static async getQuestions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=await r.Z.get("/questions?".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async getQuestionByID(e,t){let a=await r.Z.get("/questions/".concat(t,"?populate=*"),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async createQuestion(e,t){let a=await r.Z.post("/questions",t,{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async updateQuestion(e,t,a){let s=await r.Z.put("/questions/".concat(t),a,{headers:{Authorization:"Bearer ".concat(e)}});return s.data}static async deleteQuestion(e,t){let a=await r.Z.delete("/questions/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}}},4772:function(e,t,a){"use strict";a.d(t,{Q:function(){return s}});var r=a(353);let s=r.Ry({answerText:r.Z_().trim("answer text should be valid").required("answer text is required"),isCorrect:r.O7().default(!1)})}},function(e){e.O(0,[5625,6680,6415,7079,3287,3296,1827,2162,1420,7240,4824,4214,5600,4088,1644,9253,2961,1744],function(){return e(e.s=8676)}),_N_E=e.O()}]);