(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5396],{8476:function(e,t,a){Promise.resolve().then(a.bind(a,2338))},2338:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var r=a(9268),n=a(443),s=a(5147),i=a(9460),c=a(3071),o=a(4772),l=a(8852),u=a(6006),d=a(8919),f=a(4824),h=a(4088);function x(e){let{token:t}=e,{handleChange:a,handleSubmit:x,values:m,errors:w,questionOptions:p,question:g,setQuestion:b,loading:y}=function(e){let t=(0,f.useQueryClient)(),a=(0,u.useContext)(s.f),[r,n]=(0,u.useState)([]),[h,x]=(0,u.useState)({value:"",label:""}),{handleChange:m,handleSubmit:w,values:p,errors:g}=(0,l.TA)({initialValues:{answerText:"",isCorrect:!1},validationSchema:o.Q,async onSubmit(e){await j(e)}}),{data:b}=(0,f.useQuery)(["select-questions"],()=>c.Z.getQuestions(e,"?fields[0]=question_text"),{staleTime:1/0,onError:()=>d.ZP.error("something went wrong, please try again")}),{mutateAsync:y,isLoading:v}=(0,f.useMutation)(t=>i.Z.createAnswer(e,t),{onSuccess:async()=>{await t.invalidateQueries(["answers"]),null==a||a.onClose(),d.ZP.success("Answer created successfully")}});async function j(e){if(!h.value){d.ZP.error("please select question");return}try{let t={data:{question:h.value,answer_text:e.answerText,is_correct:p.isCorrect}};await y(t)}catch(e){d.ZP.error(e.response.data.error.message||"something went wrong, please try again!")}}return(0,u.useEffect)(()=>{b&&n(null==b?void 0:b.data.map(e=>({value:e.id.toString(),label:e.attributes.question_text})))},[b]),{handleChange:m,handleSubmit:w,values:p,errors:g,questionOptions:r,question:h,setQuestion:x,loading:v}}(t),v=(0,u.useContext)(s.f);return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:"Create a new answer"}),(0,r.jsx)("p",{children:"Add the information about the answer"})]}),(0,r.jsxs)("form",{onSubmit:x,className:"rounded-md p-3 shadow-md",action:"",children:[(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsx)(n.II,{name:"answerText",value:m.answerText,onChange:a,error:w.answerText,label:"Answer text",variant:"filled"})}),(0,r.jsx)("div",{className:"mb-12 flex items-center gap-4",children:(0,r.jsx)(n.ZD,{name:"isCorrect",title:"Is correct answers",onChange:a,value:m.isCorrect})}),(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:"Choose a question"}),(0,r.jsx)(h.ZP,{value:g,onChange:e=>b({value:null==e?void 0:e.value.toString(),label:null==e?void 0:e.label}),options:p})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,r.jsx)(n.zx,{loading:y,type:"submit",className:"w-fit text-white",children:"Create answer"}),(0,r.jsx)(n.zx,{onClick:null==v?void 0:v.onClose,className:"w-fit bg-transparent text-primary",children:"Cancel"})]})]})]})}},443:function(e,t,a){"use strict";a.d(t,{zx:function(){return r.default},II:function(){return n.default},gx:function(){return c},ZD:function(){return o}});var r=a(4769);a(9510);var n=a(445);a(9743),a(3402);var s=a(9268);a(6006);let i={outline:"bg-white",filled:"bg-gray-100 dark:bg-primaryBg border-2 border dark:border-gray-500 dark:focus-within:border-primary focus-within:border-primary"};var c=function(e){let{label:t,variant:a,error:r,...n}=e;return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:t}),(0,s.jsx)("textarea",{...n,className:"h-[200px] resize-none  rounded-md px-2 py-3 outline-none ".concat(i[a])}),r&&(0,s.jsx)("small",{className:"mt-1 text-sm text-red-500",children:r})]})};function o(e){let{title:t,value:a,onChange:r,name:n}=e;return(0,s.jsxs)("label",{className:"relative w-fit inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{name:n,onChange:r,type:"checkbox",checked:a,className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}),(0,s.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300",children:t})]})}},4737:function(e,t,a){"use strict";var r=a(4214),n=a(8611);let s=r.default.create({baseURL:"".concat(n.env.NEXT_PUBLIC_BASE_URL,"/api"),headers:{"Content-Type":"application/json"}});t.Z=s},5147:function(e,t,a){"use strict";a.d(t,{f:function(){return s},n:function(){return i}});var r=a(9268),n=a(6006);let s=(0,n.createContext)(null),i=e=>{let{children:t}=e,[a,i]=(0,n.useState)(!1);return(0,r.jsx)(s.Provider,{value:{open:a,onClose:()=>i(!1),onOpen:()=>i(!0)},children:t})}},9460:function(e,t,a){"use strict";var r=a(4737);t.Z=class{static async getAnswers(e,t){let a=await r.Z.get("/answers?".concat(t||""),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async getAnswerById(e,t){let a=await r.Z.get("/answers/".concat(t,"?populate=*"),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async deleteByID(e,t){let a=await r.Z.delete("/answers/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async createAnswer(e,t){let a=await r.Z.post("/answers",t,{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async updateAnswer(e,t,a){let n=await r.Z.put("/answers/".concat(t),a,{headers:{Authorization:"Bearer ".concat(e)}});return n.data}}},3071:function(e,t,a){"use strict";var r=a(4737);t.Z=class{static async getQuestions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=await r.Z.get("/questions?".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async getQuestionByID(e,t){let a=await r.Z.get("/questions/".concat(t,"?populate=*"),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async createQuestion(e,t){let a=await r.Z.post("/questions",t,{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async updateQuestion(e,t,a){let n=await r.Z.put("/questions/".concat(t),a,{headers:{Authorization:"Bearer ".concat(e)}});return n.data}static async deleteQuestion(e,t){let a=await r.Z.delete("/questions/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}}},4772:function(e,t,a){"use strict";a.d(t,{Q:function(){return n}});var r=a(353);let n=r.Ry({answerText:r.Z_().trim("answer text should be valid").required("answer text is required"),isCorrect:r.O7().default(!1)})}},function(e){e.O(0,[5625,6680,6415,7079,3287,3296,1827,2162,1420,7240,4824,4214,5600,4088,1644,9253,2961,1744],function(){return e(e.s=8476)}),_N_E=e.O()}]);