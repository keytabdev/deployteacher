(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3805],{7017:function(e,a,t){Promise.resolve().then(t.bind(t,7227))},7227:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return z}});var s=t(9268),i=t(6006),r=t(771),n=t(80),l=t(2635),o=t(8852),c=t(8919),d=t(4824),u=t(443),m=t(4088),h=t(5326),p=t.n(h),x=t(5846),f=t.n(x),g=t(1725),b=t(6394),v=t.n(b),j=t(8611);function z(e){let{quiz:a,token:t}=e,{handleChange:h,handleSubmit:p,values:x,errors:f,lessons:b,loading:v,selectedLesson:j,setSelectedLesson:z}=function(e,a){var t,s;let u=(0,d.useQueryClient)(),{title:m,description:h,duration:p,passing_score:x,lesson:f}=a.data.attributes,{handleChange:g,handleSubmit:b,values:v,errors:j}=(0,o.TA)({initialValues:{title:m,description:h,duration:p,passingScore:x},validationSchema:l.z,async onSubmit(e){await Z(e)}}),[z,N]=(0,i.useState)({value:"".concat(null===(t=f.data)||void 0===t?void 0:t.id),label:null===(s=f.data)||void 0===s?void 0:s.attributes.title}),{data:y}=(0,d.useQuery)(["select-lessons"],()=>r.Z.getLessons(e,"?fields[0]=title"),{staleTime:1/0,onError:()=>c.ZP.error("something went wrong at fetching courses please try again")}),{mutateAsync:w,isLoading:q}=(0,d.useMutation)([a.data.id],t=>n.Z.updateQuiz(e,a.data.id.toString(),t),{onSuccess:async()=>await u.invalidateQueries(["quizzes"])});async function Z(e){try{let a={data:{lesson:z.value,passing_score:e.passingScore,...v}};await w(a),c.ZP.success("Quiz updated successfully")}catch(e){c.ZP.error(e.response.data.error.message||"something went wrong, please try again!")}}return{handleChange:g,handleSubmit:b,values:v,errors:j,selectedLesson:z,setSelectedLesson:N,lessons:y,loading:q}}(t,a),y=null==b?void 0:b.data.map(e=>({value:e.id.toString(),label:e.attributes.title}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-xl font-bold",children:"Update a quiz"}),(0,s.jsx)("p",{children:a.data.attributes.title})]}),(0,s.jsxs)("form",{onSubmit:p,className:"mb-12 rounded-md bg-white p-3 shadow-md",action:"",children:[(0,s.jsx)("div",{className:"mb-12",children:(0,s.jsx)(u.II,{name:"title",value:x.title,onChange:h,error:f.title,label:"Quiz title",variant:"filled"})}),(0,s.jsx)("div",{className:"mb-12",children:(0,s.jsx)(u.gx,{name:"description",value:x.description,onChange:h,error:f.description,label:"Quiz description",variant:"filled"})}),(0,s.jsx)("div",{className:"mb-12",children:(0,s.jsx)(u.II,{name:"duration",value:x.duration,onChange:h,error:f.duration,label:"Quiz duration",variant:"filled",type:"text"})}),(0,s.jsx)("div",{className:"mb-12",children:(0,s.jsx)(u.II,{name:"passingScore",value:x.passingScore,onChange:h,error:f.passingScore,label:"Passing score",variant:"filled"})}),(0,s.jsx)("div",{className:"mb-12 grid grid-cols-1 gap-12  md:grid-cols-2 md:gap-8",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:"Choose a lesson"}),(0,s.jsx)(m.ZP,{value:j,onChange:e=>z({value:"".concat(null==e?void 0:e.value),label:null==e?void 0:e.label}),options:y})]})}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(u.zx,{loading:v,type:"submit",className:"w-fit text-white",children:"Update quiz"})})]}),(0,s.jsx)("div",{className:"mb-12",children:(0,s.jsx)(N,{quiz:a})}),(0,s.jsx)("div",{className:"mt-12",children:(0,s.jsx)(g.default,{token:t,customQuery:"".concat(a.data.id)})})]})}function N(e){let{quiz:a}=e;if(!a.data.attributes.lesson.data)return(0,s.jsxs)("div",{className:"rounded-md p-4 shadow-lg dark:bg-primaryBg",children:[(0,s.jsx)("h1",{className:"mb-4 text-2xl font-bold",children:"Lesson"}),(0,s.jsx)("p",{children:"No lesson found"})]});let{id:t,attributes:i}=a.data.attributes.lesson.data,{thumbnail:r,description:n,publishedAt:l,title:o}=i;return(0,s.jsxs)("div",{className:"rounded-md p-4 shadow-lg dark:bg-primaryBg",children:[(0,s.jsx)("h1",{className:"mb-4 text-2xl font-bold",children:"Lesson"}),(0,s.jsx)("div",{className:"relative h-[250px] w-full overflow-hidden rounded-md",children:(0,s.jsx)(v(),{src:"".concat(j.env.NEXT_PUBLIC_BASE_URL).concat(r.data.attributes.url),alt:"",fill:!0,className:"object-cover"})}),(0,s.jsxs)("div",{className:"mt-8 grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{htmlFor:"",className:"font-semibold",children:"Lesson ID"}),(0,s.jsx)(f(),{href:"/dashboard/lessons/".concat(t),children:t})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{htmlFor:"",className:"font-semibold",children:"Lesson Name"}),(0,s.jsx)("p",{children:o})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{htmlFor:"",className:"font-semibold",children:"Pulisehd At"}),(0,s.jsx)("p",{children:p()(l).format("DD-MMMM-YYYY")})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex flex-col gap-1",children:[(0,s.jsx)("label",{htmlFor:"",className:"font-semibold",children:"Description"}),(0,s.jsx)("p",{children:n})]}),(0,s.jsx)(f(),{href:"/dashboard/lessons/".concat(t),className:"ml-auto mt-4 block w-fit",children:(0,s.jsx)(u.zx,{className:"ml-auto w-fit border border-primary bg-transparent text-primary",children:"View lesson"})})]})}},771:function(e,a,t){"use strict";var s=t(4737);a.Z=class{static async getLessons(e,a){let t=await s.Z.get("/lessons?".concat(a||""),{headers:{Authorization:"Bearer ".concat(e)}});return t.data}static async getLessonById(e,a){let t=await s.Z.get("/lessons/".concat(a,"?populate[course][populate][course_image]=*&populate[thumbnail]=*&populate[media]=*&populate[course][populate][instructor_id]=*"),{headers:{Authorization:"Bearer ".concat(e)}});return t.data}static async deleteByID(e,a){let t=await s.Z.delete("/lessons/".concat(a),{headers:{Authorization:"Bearer ".concat(e)}});return t.data}static async createLesson(e,a){let t=await s.Z.post("/lessons",a,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}});return t.data}static async updateLesson(e,a,t){let i=await s.Z.put("/lessons/".concat(a),t,{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"multipart/form-data"}});return i.data}}},80:function(e,a,t){"use strict";var s=t(4737);a.Z=class{static async getQuizzes(e,a){let t=await s.Z.get("/quizzes?".concat(a||""),{headers:{Authorization:"Bearer ".concat(e)}});return t.data}static async getQuizzByID(e,a){let t=await s.Z.get("/quizzes/".concat(a,"?populate[lesson][populate][thumbnail]=*"),{headers:{Authorization:"Bearer ".concat(e)}});return t.data}static async deleteByID(e,a){let t=await s.Z.delete("/quizzes/".concat(a),{headers:{Authorization:"Bearer ".concat(e)}});return t.data}static async createQuiz(e,a){let t=await s.Z.post("/quizzes",a,{headers:{Authorization:"Bearer ".concat(e)}});return t.data}static async updateQuiz(e,a,t){let i=await s.Z.put("/quizzes/".concat(a),t,{headers:{Authorization:"Bearer ".concat(e)}});return i.data}}},2635:function(e,a,t){"use strict";t.d(a,{z:function(){return i}});var s=t(353);let i=s.Ry({title:s.Z_().trim("quiz title should be valid").required("quiz title is required"),description:s.Z_().trim("quiz description is required").required("quiz description is required"),duration:s.Rx().required("duration is required").transform((e,a)=>parseInt(e)),passingScore:s.Rx().required("passing score is required").transform((e,a)=>parseInt(e))})}},function(e){e.O(0,[5625,6680,6415,7079,3287,3296,1827,2162,8121,9173,4550,1420,7240,4824,4214,5600,4088,7497,1644,7632,9253,2961,1744],function(){return e(e.s=7017)}),_N_E=e.O()}]);