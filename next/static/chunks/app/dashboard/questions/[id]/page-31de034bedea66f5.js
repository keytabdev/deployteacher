(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[354],{9839:function(e,a,t){Promise.resolve().then(t.bind(t,2353))},2353:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return v}});var s=t(9268),l=t(6006),i=t(3071),n=t(80),r=t(3737),o=t(8852),c=t(6008),d=t(8919),u=t(4824),m=t(443),h=t(4088),x=t(3164),b=t(5846),f=t.n(b);function v(e){let{token:a,question:t}=e,{handleChange:b,handleSubmit:f,values:v,errors:p,selectedQuiz:g,setSelectedQuiz:z,type:q,setType:N,questionTypes:y,quizzes:w,loading:Q}=function(e,a){var t,s;let{question_text:m,question_type:h,quiz:x,score:b,order:f}=a.data.attributes;(0,c.useRouter)();let v=(0,u.useQueryClient)(),j=(0,l.useMemo)(()=>[{value:"multiple choice",label:"multiple choice"},{value:"fill in the blanks",label:"fill in the blanks"},{value:"single choice",label:"single choice"},{value:"text",label:"text"}],[]),{handleChange:p,handleSubmit:g,values:z,errors:q}=(0,o.TA)({initialValues:{questionText:m,score:b,order:f},validationSchema:r.j,async onSubmit(e){await I(e)}}),[N,y]=(0,l.useState)({value:(null===(t=x.data)||void 0===t?void 0:t.id.toString())||"",label:(null===(s=x.data)||void 0===s?void 0:s.attributes.title)||""}),[w,Q]=(0,l.useState)({value:h,label:h}),{data:Z}=(0,u.useQuery)(["select-quizzes"],()=>n.Z.getQuizzes(e,"?fields[0]=title"),{staleTime:1/0}),k=(0,u.useMutation)([e,a.data.id],t=>i.Z.updateQuestion(e,a.data.id,t),{onSuccess:async()=>await v.invalidateQueries({queryKey:["select-questions","questions"]})});async function I(e){try{let a={data:{question_text:e.questionText,score:e.score,quiz:N.value,question_type:w.value}};await k.mutateAsync(a),d.ZP.success("question has been updated successfully")}catch(e){d.ZP.error(e.response.data.error.message||"something went wrong!")}}return{handleChange:p,handleSubmit:g,values:z,errors:q,selectedQuiz:N,setSelectedQuiz:y,type:w,setType:Q,questionTypes:j,quizzes:Z,loading:k.isLoading}}(a,t),Z=null==w?void 0:w.data.map(e=>({value:e.id.toString(),label:e.attributes.title}));return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-xl font-bold",children:"Update a question"}),(0,s.jsx)("p",{children:t.data.attributes.question_text})]}),(0,s.jsxs)("form",{onSubmit:f,className:"mb-12 rounded-md bg-white p-3 shadow-md",action:"",children:[(0,s.jsx)("div",{className:"mb-12",children:(0,s.jsx)(m.II,{name:"questionText",value:v.questionText,onChange:b,error:p.questionText,label:"Question text",variant:"filled"})}),(0,s.jsx)("div",{className:"mb-12",children:(0,s.jsx)(m.II,{name:"score",value:v.score,onChange:b,error:p.score,label:"Question score",variant:"filled"})}),(0,s.jsx)("div",{className:"mb-12",children:(0,s.jsx)(m.II,{name:"order",value:v.order,onChange:b,error:p.order,label:"Question order",variant:"filled"})}),(0,s.jsxs)("div",{className:"mb-12 grid w-full grid-cols-1 gap-12 md:grid-cols-2 md:gap-8",children:[(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[(0,s.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:"Question type"}),(0,s.jsx)(h.ZP,{value:q,onChange:e=>N({value:null==e?void 0:e.value,label:null==e?void 0:e.label}),options:y})]}),(0,s.jsxs)("div",{className:"flex w-full flex-col",children:[(0,s.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:"Choose a quiz"}),(0,s.jsx)(h.ZP,{value:g,onChange:e=>z({value:null==e?void 0:e.value.toString(),label:null==e?void 0:e.label}),options:Z})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(m.zx,{loading:Q,type:"submit",className:"w-fit text-white",children:"Update question"})})]}),(0,s.jsx)("div",{className:"mb-12",children:(0,s.jsx)(j,{question:t})}),(0,s.jsx)("div",{className:"mt-12",children:(0,s.jsx)(x.default,{token:a,customQuery:"".concat(t.data.id)})})]})}function j(e){let{question:a}=e;if(!a.data.attributes.quiz.data)return(0,s.jsx)("div",{className:"rounded-md p-4 shadow-lg dark:bg-primaryBg",children:(0,s.jsx)("p",{children:"No quiz found"})});let{id:t,attributes:l}=a.data.attributes.quiz.data,{duration:i,passing_score:n,title:r,description:o}=l;return(0,s.jsxs)("div",{className:"rounded-md p-4 shadow-lg dark:bg-primaryBg",children:[(0,s.jsx)("h1",{className:"mb-4 text-2xl font-bold",children:"Quiz"}),(0,s.jsxs)("div",{className:"mt-8 grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{htmlFor:"",className:"font-semibold",children:"Quiz ID"}),(0,s.jsx)(f(),{href:"/dashboard/quizzes/".concat(t),children:t})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{htmlFor:"",className:"font-semibold",children:"Quiz title"}),(0,s.jsx)("p",{children:r})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{htmlFor:"",className:"font-semibold",children:"Passing score"}),(0,s.jsx)("p",{children:n})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,s.jsx)("label",{htmlFor:"",className:"font-semibold",children:"Duration"}),(0,s.jsxs)("p",{children:[i," minutes"]})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex flex-col gap-1",children:[(0,s.jsx)("label",{htmlFor:"",className:"font-semibold",children:"Description"}),(0,s.jsx)("p",{children:o})]}),(0,s.jsx)(f(),{href:"/dashboard/quizzes/".concat(t),className:"ml-auto mt-4 block w-fit",children:(0,s.jsx)(m.zx,{className:"ml-auto w-fit border border-primary bg-transparent text-primary",children:"View Quiz"})})]})}},80:function(e,a,t){"use strict";var s=t(4737);a.Z=class{static async getQuizzes(e,a){let t=await s.Z.get("/quizzes?".concat(a||""),{headers:{Authorization:"Bearer ".concat(e)}});return t.data}static async getQuizzByID(e,a){let t=await s.Z.get("/quizzes/".concat(a,"?populate[lesson][populate][thumbnail]=*"),{headers:{Authorization:"Bearer ".concat(e)}});return t.data}static async deleteByID(e,a){let t=await s.Z.delete("/quizzes/".concat(a),{headers:{Authorization:"Bearer ".concat(e)}});return t.data}static async createQuiz(e,a){let t=await s.Z.post("/quizzes",a,{headers:{Authorization:"Bearer ".concat(e)}});return t.data}static async updateQuiz(e,a,t){let l=await s.Z.put("/quizzes/".concat(a),t,{headers:{Authorization:"Bearer ".concat(e)}});return l.data}}},3737:function(e,a,t){"use strict";t.d(a,{j:function(){return l}});var s=t(353);let l=s.Ry({questionText:s.Z_().trim("question text should be valid").required("question text  is required"),score:s.Rx().required("passing score is required").transform((e,a)=>parseInt(e)),order:s.Rx()})}},function(e){e.O(0,[5625,6680,6415,7079,3287,3296,1827,2162,8121,9173,1420,7240,4824,4214,5600,4088,7497,1644,7786,9253,2961,1744],function(){return e(e.s=9839)}),_N_E=e.O()}]);