(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7153],{6302:function(e,t,a){Promise.resolve().then(a.bind(a,3335))},3335:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var r=a(9268),s=a(443),n=a(3071),i=a(80),l=a(3737),o=a(8852),u=a(6008),c=a(6006),d=a(8919),h=a(4824);let m={questionText:"",score:0,order:0};var f=a(4088);function x(e){let{token:t}=e,{handleChange:a,handleSubmit:x,values:b,errors:p,quizzes:v,quiz:g,setQuiz:y,questionTypes:q,type:z,setType:w,loading:j}=function(e){let t=(0,u.useRouter)(),a=(0,h.useQueryClient)(),r=(0,c.useMemo)(()=>[{value:"multiple choice",label:"multiple choice"},{value:"fill in the blanks",label:"fill in the blanks"},{value:"single choice",label:"single choice"},{value:"text",label:"text"}],[]),[s,f]=(0,c.useState)({value:"",label:""}),[x,b]=(0,c.useState)({value:"",label:""}),{handleChange:p,handleSubmit:v,values:g,errors:y}=(0,o.TA)({initialValues:m,validationSchema:l.j,async onSubmit(e){await w(e)}}),{data:q}=(0,h.useQuery)(["select-quizzes"],()=>i.Z.getQuizzes(e,"?fields[0]=title"),{staleTime:1/0}),z=(0,h.useMutation)([e],t=>n.Z.createQuestion(e,t),{onSuccess:async e=>{let{data:r}=e;await a.invalidateQueries({queryKey:["select-questions","questions"]}),t.push("/dashboard/questions/".concat(r.id)),d.Am.success("question has been created successfully")}});async function w(e){if(!x.value){d.Am.error("please choose a question type");return}if(!s.value){d.Am.error("please choose a quiz");return}try{let t={data:{question_text:e.questionText,score:e.score,quiz:s.value,question_type:x.value}};await z.mutateAsync(t)}catch(e){d.Am.error(e.response.data.error.message||"something went wrong!")}}return{handleChange:p,handleSubmit:v,values:g,errors:y,quizzes:q,quiz:s,setQuiz:f,questionTypes:r,type:x,setType:b,loading:z.isLoading}}(t),N=null==v?void 0:v.data.map(e=>({value:e.id.toString(),label:e.attributes.title}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:"Create a new question"}),(0,r.jsx)("p",{children:"Add the information about the question"})]}),(0,r.jsxs)("form",{onSubmit:x,className:"rounded-md bg-white p-3 shadow-md",action:"",children:[(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsx)(s.II,{name:"questionText",value:b.questionText,onChange:a,error:p.questionText,label:"Question text",variant:"filled"})}),(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsx)(s.II,{name:"score",value:b.score,onChange:a,error:p.score,label:"Question score",variant:"filled"})}),(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsx)(s.II,{name:"order",value:b.order,onChange:a,error:p.order,label:"Question order",variant:"filled"})}),(0,r.jsxs)("div",{className:"mb-12 grid w-full grid-cols-1 gap-12 md:grid-cols-2 md:gap-8",children:[(0,r.jsxs)("div",{className:"flex w-full flex-col",children:[(0,r.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:"Question type"}),(0,r.jsx)(f.ZP,{value:z,onChange:e=>w({value:null==e?void 0:e.value,label:null==e?void 0:e.label}),options:q})]}),(0,r.jsxs)("div",{className:"flex w-full flex-col",children:[(0,r.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:"Choose a quiz"}),(0,r.jsx)(f.ZP,{value:g,onChange:e=>y({value:null==e?void 0:e.value.toString(),label:null==e?void 0:e.label}),options:N})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(s.zx,{loading:j,type:"submit",className:"w-fit text-white",children:"Create question"})})]})]})}},443:function(e,t,a){"use strict";a.d(t,{zx:function(){return r.default},II:function(){return s.default},gx:function(){return l},ZD:function(){return o}});var r=a(4769);a(9510);var s=a(445);a(9743),a(3402);var n=a(9268);a(6006);let i={outline:"bg-white",filled:"bg-gray-100 dark:bg-primaryBg border-2 border dark:border-gray-500 dark:focus-within:border-primary focus-within:border-primary"};var l=function(e){let{label:t,variant:a,error:r,...s}=e;return(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:t}),(0,n.jsx)("textarea",{...s,className:"h-[200px] resize-none  rounded-md px-2 py-3 outline-none ".concat(i[a])}),r&&(0,n.jsx)("small",{className:"mt-1 text-sm text-red-500",children:r})]})};function o(e){let{title:t,value:a,onChange:r,name:s}=e;return(0,n.jsxs)("label",{className:"relative w-fit inline-flex items-center cursor-pointer",children:[(0,n.jsx)("input",{name:s,onChange:r,type:"checkbox",checked:a,className:"sr-only peer"}),(0,n.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}),(0,n.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300",children:t})]})}},4737:function(e,t,a){"use strict";var r=a(4214),s=a(8611);let n=r.default.create({baseURL:"".concat(s.env.NEXT_PUBLIC_BASE_URL,"/api"),headers:{"Content-Type":"application/json"}});t.Z=n},3071:function(e,t,a){"use strict";var r=a(4737);t.Z=class{static async getQuestions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=await r.Z.get("/questions?".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async getQuestionByID(e,t){let a=await r.Z.get("/questions/".concat(t,"?populate=*"),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async createQuestion(e,t){let a=await r.Z.post("/questions",t,{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async updateQuestion(e,t,a){let s=await r.Z.put("/questions/".concat(t),a,{headers:{Authorization:"Bearer ".concat(e)}});return s.data}static async deleteQuestion(e,t){let a=await r.Z.delete("/questions/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}}},80:function(e,t,a){"use strict";var r=a(4737);t.Z=class{static async getQuizzes(e,t){let a=await r.Z.get("/quizzes?".concat(t||""),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async getQuizzByID(e,t){let a=await r.Z.get("/quizzes/".concat(t,"?populate[lesson][populate][thumbnail]=*"),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async deleteByID(e,t){let a=await r.Z.delete("/quizzes/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async createQuiz(e,t){let a=await r.Z.post("/quizzes",t,{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async updateQuiz(e,t,a){let s=await r.Z.put("/quizzes/".concat(t),a,{headers:{Authorization:"Bearer ".concat(e)}});return s.data}}},3737:function(e,t,a){"use strict";a.d(t,{j:function(){return s}});var r=a(353);let s=r.Ry({questionText:r.Z_().trim("question text should be valid").required("question text  is required"),score:r.Rx().required("passing score is required").transform((e,t)=>parseInt(e)),order:r.Rx()})}},function(e){e.O(0,[5625,6680,6415,7079,3287,3296,1827,2162,1420,7240,4824,4214,5600,4088,1644,9253,2961,1744],function(){return e(e.s=6302)}),_N_E=e.O()}]);