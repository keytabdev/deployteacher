(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9416],{9578:function(e,t,a){Promise.resolve().then(a.bind(a,7742))},7742:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var r=a(9268),n=a(443),s=a(1462),l=a(2992),i=a(4105),c=a(4055),d=a(8582),o=a(9457),u=a(5846),x=a.n(u),m=a(6006),f=a(8919),h=a(8136),g=a(4821),p=a(4824),j=a(189),b=a(4552),y=a(8852);function N(e){let{token:t}=e,{handleChange:a,handleSubmit:s,values:l,errors:i,loading:c}=function(e){let t=(0,p.useQueryClient)(),a=(0,m.useContext)(j.Y),{handleChange:r,handleSubmit:n,values:s,errors:l}=(0,y.TA)({initialValues:{name:""},validationSchema:b.B,async onSubmit(e){await d(e)}}),{mutateAsync:i,isLoading:c}=(0,p.useMutation)(t=>o.Z.createTag(e,t),{onSuccess:async()=>{await t.invalidateQueries(["tags"]),null==a||a.onClose(),f.ZP.success("Tag created successfully")}});async function d(e){try{let e={data:{name:s.name}};await i(e)}catch(e){f.ZP.error(e.response.data.error.message||"something went wrong, please try again!")}}return{handleChange:r,handleSubmit:n,values:s,errors:l,loading:c}}(t),d=(0,m.useContext)(j.Y);return(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-xl font-bold",children:"Create a new tag"}),(0,r.jsx)("p",{children:"Add the information about the tag"})]}),(0,r.jsxs)("form",{onSubmit:s,className:"rounded-md p-3 shadow-md",action:"",children:[(0,r.jsx)("div",{className:"mb-12",children:(0,r.jsx)(n.II,{name:"name",value:l.name,onChange:a,error:i.name,label:"Tag name",variant:"filled"})}),(0,r.jsxs)("div",{className:"flex items-center justify-end gap-4",children:[(0,r.jsx)(n.zx,{loading:c,type:"submit",className:"w-fit text-white",children:"Create tag"}),(0,r.jsx)(n.zx,{onClick:null==d?void 0:d.onClose,className:"w-fit bg-transparent text-primary",children:"Cancel"})]})]})]})}function v(e){let{token:t,customQuery:a}=e,[u,b]=(0,m.useState)(""),y=(0,d.Z)(u,500),[v,w]=(0,m.useState)(1),k=(0,m.useContext)(j.Y),{data:C,isLoading:Z}=(0,p.useQuery)(["tags",y,v],()=>o.Z.getTags(t,"?fields[0]=name&filters[$or][0][id][$eq]=".concat(y,"&filters[$or][1][name][$contains]=").concat(y).concat(y?"":"&pagination[page]=".concat(v,"&pagination[pageSize]=5")).concat(a||"")),{onError:()=>f.ZP.error("something went wrong please try again after refreshing")});async function T(e){return o.Z.deleteTag(t,e)}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold",children:"Tags"}),(0,r.jsxs)("div",{className:"ml-auto flex w-full items-center justify-end gap-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 rounded-md border bg-gray-100 px-3 py-3",children:[(0,r.jsx)(h.dVI,{className:"text-xl"}),(0,r.jsx)("input",{type:"text",className:"bg-transparent outline-none",placeholder:"search",value:u,onChange:e=>b(e.target.value)})]}),(0,r.jsx)(n.zx,{onClick:null==k?void 0:k.onOpen,className:"flex w-fit items-center gap-2 text-white",children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(h.B8K,{className:"text-xl"}),(0,r.jsx)("span",{children:"Add tag"})]})})]})]}),(0,r.jsxs)("div",{className:"mt-8 rounded-md shadow-lg",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full min-w-[750px]  rounded-md border bg-white p-4 shadow-lg dark:border-gray-600 dark:bg-primaryBg",children:[(0,r.jsx)("thead",{className:"border-b dark:border-gray-600 ",children:(0,r.jsxs)("tr",{className:"text-left",children:[(0,r.jsx)("td",{className:"p-4 font-bold",children:"ID"}),(0,r.jsx)("td",{className:"p-4 font-bold",children:"Tag Name"}),(0,r.jsx)("td",{className:"p-4 text-right font-bold"})]})}),(0,r.jsx)("tbody",{children:Z?(0,r.jsx)("td",{colSpan:2,className:"p-4 text-center",children:(0,r.jsx)(l.Z,{})}):(null==C?void 0:C.data)&&(null==C?void 0:C.data.length)>0?null==C?void 0:C.data.map(e=>{let{id:t,attributes:a}=e,{name:n}=a;return(0,r.jsxs)("tr",{className:"w-full hover:bg-gray-100 dark:hover:bg-transparent",children:[(0,r.jsx)("td",{className:"p-4 text-left",children:t}),(0,r.jsx)("td",{className:"p-4 text-left",children:n}),(0,r.jsxs)("td",{className:"flex items-center justify-end gap-2 p-4",children:[(0,r.jsx)(x(),{href:"/dashboard/tags/".concat(t),children:(0,r.jsx)(g.yMw,{className:"cursor-pointer text-2xl text-gray-500"})}),(0,r.jsx)(s.Z,{fn:T,title:"".concat(n),label:"tag",id:t.toString(),keys:["tags"]})]})]},t)}):(0,r.jsx)("td",{colSpan:2,className:"p-4 text-center",children:"No tags found"})})]})}),(0,r.jsx)(c.Z,{page:v,pageCount:(null==C?void 0:C.meta.pagination.pageCount)||1,setPage:w})]})]}),(0,r.jsx)(i.Z,{open:null==k?void 0:k.open,children:(0,r.jsx)(N,{token:t})})]})}},1462:function(e,t,a){"use strict";a.d(t,{Z:function(){return u}});var r=a(9268),n=a(6006),s=a(4769),l=a(4824),i=a(8919),c=a(1033),d=a(5372),o=a(4105);function u(e){let{id:t,title:a,label:u,fn:x,keys:m}=e,f=(0,l.useQueryClient)(),[h,g]=(0,n.useState)(!1),{mutateAsync:p,isLoading:j}=(0,l.useMutation)([t],()=>x(t),{onSuccess:async()=>await f.invalidateQueries(m)});async function b(){try{await p(),g(!1),i.Am.success("".concat(u," delete successfully"))}catch(e){g(!1),i.Am.error(e.response.data.error.message||"something went wrong!")}}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.VPh,{onClick:()=>g(!0),className:"cursor-pointer text-2xl text-gray-500 dark:text-white"}),(0,r.jsx)(o.Z,{open:h,children:(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,r.jsx)(d.OvZ,{className:"mb-4 text-4xl text-red-500"}),(0,r.jsx)("h1",{className:"text-bold mb-4 text-center text-xl",children:"Warning!"})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center gap-1",children:[(0,r.jsxs)("p",{children:["Are you sure you want to delete a ",u]}),(0,r.jsx)("span",{className:"text-center text-xl font-bold",children:a})]}),(0,r.jsxs)("div",{className:"mt-8 flex items-center gap-4",children:[(0,r.jsx)(s.default,{onClick:b,loading:j,className:"w-full text-white",children:"Yes sure"}),(0,r.jsx)(s.default,{onClick:()=>g(!1),className:"w-full bg-transparent text-primary",children:"No cancel"})]})]})})]})}},443:function(e,t,a){"use strict";a.d(t,{zx:function(){return r.default},II:function(){return n.default},gx:function(){return i},ZD:function(){return c}});var r=a(4769);a(9510);var n=a(445);a(9743),a(3402);var s=a(9268);a(6006);let l={outline:"bg-white",filled:"bg-gray-100 dark:bg-primaryBg border-2 border dark:border-gray-500 dark:focus-within:border-primary focus-within:border-primary"};var i=function(e){let{label:t,variant:a,error:r,...n}=e;return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("label",{htmlFor:"",className:"mb-2 text-sm",children:t}),(0,s.jsx)("textarea",{...n,className:"h-[200px] resize-none  rounded-md px-2 py-3 outline-none ".concat(l[a])}),r&&(0,s.jsx)("small",{className:"mt-1 text-sm text-red-500",children:r})]})};function c(e){let{title:t,value:a,onChange:r,name:n}=e;return(0,s.jsxs)("label",{className:"relative w-fit inline-flex items-center cursor-pointer",children:[(0,s.jsx)("input",{name:n,onChange:r,type:"checkbox",checked:a,className:"sr-only peer"}),(0,s.jsx)("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 rounded-full peer dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary"}),(0,s.jsx)("span",{className:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300",children:t})]})}},2992:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(9268);function n(){return(0,r.jsx)("div",{className:"flex items-center justify-center",children:(0,r.jsx)("div",{className:"h-[55px] w-[55px] animate-spin rounded-full border-2 border-l-primary border-r-primary border-t-primary dark:border-b-gray-500"})})}},4105:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(9268);function n(e){let{children:t,open:a}=e;return(0,r.jsx)(r.Fragment,{children:a?(0,r.jsx)("div",{className:"fixed left-0 top-0 z-50 flex min-h-screen w-full items-center justify-center bg-[rgba(0,0,0,0.6)]",children:(0,r.jsx)("div",{className:"w-full max-w-[550px] rounded-md bg-white p-4 dark:bg-primaryBg",children:t})}):(0,r.jsx)(r.Fragment,{})})}},4055:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var r=a(9268),n=a(4821),s=a(4769);function l(e){let{page:t,setPage:a,pageCount:l}=e;return(0,r.jsxs)("div",{className:"flex items-center justify-end bg-white py-2 dark:bg-primaryBg",children:[(0,r.jsx)(s.default,{disabled:1===t,onClick:()=>a(t-1),className:"bg-transparent disabled:text-gray-400",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(n.RL9,{}),(0,r.jsx)("span",{children:"Prev"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("p",{children:t}),(0,r.jsx)("small",{children:"of"}),(0,r.jsx)("p",{children:l})]}),(0,r.jsx)(s.default,{disabled:t===l,onClick:()=>a(t+1),className:"bg-transparent disabled:text-gray-400",children:(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(n.Bqb,{})]})})]})}},4737:function(e,t,a){"use strict";var r=a(4214),n=a(8611);let s=r.default.create({baseURL:"".concat(n.env.NEXT_PUBLIC_BASE_URL,"/api"),headers:{"Content-Type":"application/json"}});t.Z=s},189:function(e,t,a){"use strict";a.d(t,{V:function(){return l},Y:function(){return s}});var r=a(9268),n=a(6006);let s=(0,n.createContext)(null),l=e=>{let{children:t}=e,[a,l]=(0,n.useState)(!1);return(0,r.jsx)(s.Provider,{value:{open:a,onClose:()=>l(!1),onOpen:()=>l(!0)},children:t})}},8582:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var r=a(6006);function n(e,t){let[a,n]=(0,r.useState)(e);return(0,r.useEffect)(()=>{let a=setTimeout(()=>n(e),t);return()=>{clearTimeout(a)}},[e,t]),a}},9457:function(e,t,a){"use strict";var r=a(4737);t.Z=class{static async getTags(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=await r.Z.get("/tags".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async getTagByID(e,t){let a=await r.Z.get("/tags/".concat(t,"?populate=*"),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async createTag(e,t){let a=await r.Z.post("/tags",t,{headers:{Authorization:"Bearer ".concat(e)}});return a.data}static async updateTag(e,t,a){let n=await r.Z.put("/tags/".concat(t),a,{headers:{Authorization:"Bearer ".concat(e)}});return n.data}static async deleteTag(e,t){let a=await r.Z.delete("/tags/".concat(t),{headers:{Authorization:"Bearer ".concat(e)}});return a.data}}},4552:function(e,t,a){"use strict";a.d(t,{B:function(){return n}});var r=a(353);let n=r.Ry({name:r.Z_().trim("name shopuld be valid").required("name should be required")})}},function(e){e.O(0,[5625,6680,6415,7079,3287,3296,1827,2162,8121,9173,1420,7240,4824,4214,5600,1644,9253,2961,1744],function(){return e(e.s=9578)}),_N_E=e.O()}]);